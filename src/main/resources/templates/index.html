<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Registro de usuarios</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body class="bg-dark text-light">

<div class="container">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">Sistema de contactos</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                    aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="/">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link" href="/agregar">Agregar nuevo</a></li>
                </ul>
            </div>
        </div>
    </nav>
</div>

<div class="container p-4">
    <h2 class="text-center mb-3">Sistema de contactos</h2>

    <div class="table-responsive">
        <table class="table table-striped table-hover table-dark align-middle">
            <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Nombre</th>
                <th scope="col">Apellido Paterno</th>
                <th scope="col">Apellido Materno</th>
                <th scope="col">Número</th>
                <th scope="col">Correo</th>
                <th scope="col">Alcaldía</th>
                <th scope="col">CP</th>
                <th scope="col">Acciones</th>
            </tr>
            </thead>
            <tbody>
            <!-- Si es Page<Contacto>, itera sobre contactos.content -->
            <tr th:each="contacto : ${contactos.content}">
                <td th:text="${contacto.id}">1</td>
                <td th:text="${contacto.nombre}">Nombre</td>
                <td th:text="${contacto.app}">Paterno</td>
                <td th:text="${contacto.apm}">Materno</td>
                <td th:text="${contacto.numero}">5512345678</td>
                <td th:text="${contacto.correo}">correo@ejemplo.com</td>
                <td th:text="${contacto.alcaldia}">Benito Juárez</td>
                <td th:text="${contacto.cp}">03100</td>
                <td>
                    <a class="btn btn-sm btn-warning" th:href="@{/editar/{id}(id=${contacto.id})}">Editar</a>
                    <a class="btn btn-sm btn-danger"
                       th:href="@{/eliminar/{id}(id=${contacto.id})}"
                       onclick="return confirm('¿Eliminar contacto?')">Eliminar</a>
                </td>
            </tr>

            <!-- Si no hay datos -->
            <tr th:if="${#lists.isEmpty(contactos.content)}">
                <td colspan="9" class="text-center">Sin registros</td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- Paginación -->
    <nav th:if="${contactos.totalPages > 1}" aria-label="Paginación">
        <ul class="pagination justify-content-center">
            <li class="page-item" th:classappend="${contactos.first} ? 'disabled'">
                <a class="page-link" th:href="@{/lista(page=${contactos.number - 1}, size=${contactos.size})}">Anterior</a>
            </li>
            <li class="page-item"
                th:each="i : ${#numbers.sequence(0, contactos.totalPages - 1)}"
                th:classappend="${i == contactos.number} ? 'active'">
                <a class="page-link" th:text="${i + 1}"
                   th:href="@{/lista(page=${i}, size=${contactos.size})}">1</a>
            </li>
            <li class="page-item" th:classappend="${contactos.last} ? 'disabled'">
                <a class="page-link" th:href="@{/lista(page=${contactos.number + 1}, size=${contactos.size})}">Siguiente</a>
            </li>
        </ul>
    </nav>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
</body>
</html>
